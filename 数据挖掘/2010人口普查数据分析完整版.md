### æç¤ºğŸ’–ï¼š[Â¶](#æç¤ºğŸ’–ï¼š)

ç‚¹å‡»å³ä¸Šè§’çš„ğŸ‘†â€œ Fork â€ç„¶åç‚¹å‡» â€œè¿è¡Œâ€ ï¼Œå¯ç›´æ¥è¿è¡Œå¹¶æŸ¥çœ‹ä»£ç æ•ˆæœ
å…³æ³¨æˆ‘çš„ä¸“æ  ğŸ‘‰[æ•°æ®åˆ†æä¹‹ä½™...](https://www.kesci.com/home/column/5f9774e3e0eb3e003be661f0)  æ–¹ä¾¿ç¬¬ä¸€æ—¶é—´è·å–æ›´æ–°çš„é¡¹ç›®

æ¨èé¡¹ç›®ï¼š
[seaborn ç¯‡ äººå£æ™®æŸ¥åˆ†æ--å¦‚ä½•åšäººå£å¹´é¾„å±‚ç»“æ„é‡‘å­—å¡”](https://www.kesci.com/mw/project/5fde03b883e4460030a8dc3d)
[ã€Pythonè¯¾ç¨‹å“ªå®¶å¼ºã€‘åˆ†æè…¾è®¯è¯¾å ‚å“ªå®¶æœºæ„æ”¶å…¥æœ€é«˜](https://www.kesci.com/mw/project/5fce2ec21a34b90030b2826e)

æœ¬é¡¹ç›®ä¸»è¦ç”¨åˆ°  plotly å’Œ pyecharts ä¸¤ä¸ªå¯è§†åŒ–åº“ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ç¡®ä¿ä½ å·²ç»å®‰è£…å¹¶å·²é…ç½®å¥½
ğŸ‘‰ [plotly å®˜ç½‘çš„å®‰è£…åŠé…ç½®æ•™ç¨‹é“¾æ¥](https://plotly.com/python/getting-started/#initialization-for-online-plotting)

å®‰è£…
pip install plotly==4.14.1
æˆ–è€…  conda.
conda install -c plotly plotly=4.14.1

jupyter notebookæ”¯æŒçš„é…ç½®
pip install "notebook>=5.3" "ipywidgets>=7.2"
æˆ–è€…  conda.
conda install "notebook>=5.3" "ipywidgets>=7.2"

jupyter notebook

ğŸ‘‰[pyecharts å®˜ç½‘å®‰è£…æ•™ç¨‹é“¾æ¥](https://pyecharts.org/#/zh-cn/quickstart)
ğŸ‘‰[pyecharts å®˜ç½‘é…ç½®æ•™ç¨‹é“¾æ¥](https://pyecharts.org/#/zh-cn/assets_host)

## 1ã€æ•°æ®å‡†å¤‡[Â¶](#1ã€æ•°æ®å‡†å¤‡)

### åŠ è½½åŒ…[Â¶](#åŠ è½½åŒ…)

In [1]:

```
pip install plotly
```

In [2]:

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
%matplotlib inline

import plotly.io as pio
pio.templates.default = 'plotly_dark'
import plotly.graph_objects as go
import plotly.express as px

from warnings import filterwarnings
filterwarnings('ignore')
```

### å¯¼å…¥æ•°æ®[Â¶](#å¯¼å…¥æ•°æ®)

In [3]:

```
# å¯¼å…¥å„åœ°åŒºæ•°æ®
pcount = pd.read_csv('/home/kesci/input/GENDER8810/å„åœ°åŒºåˆ†å¹´é¾„ã€æ€§åˆ«çš„äººå£.csv',skiprows=2)
#å¯¼å…¥æˆ·ç±æ•°æ®
df1 = pd.read_csv('/home/kesci/input/GENDER8810/1-3  å„åœ°åŒºåˆ†æ€§åˆ«çš„æˆ·ç±äººå£çŠ¶å†µ.csv',skiprows=2)
# å¯¼å…¥åŸå¸‚æ•°æ®
df2 = pd.read_csv('/home/kesci/input/GENDER8810/1-7a  å„åœ°åŒºåˆ†å¹´é¾„ã€æ€§åˆ«çš„äººå£(åŸå¸‚).csv',skiprows=2)
#å¯¼å…¥é•‡æ•°æ®
df3 = pd.read_csv('/home/kesci/input/GENDER8810/1-7b  å„åœ°åŒºåˆ†å¹´é¾„ã€æ€§åˆ«çš„äººå£(é•‡).csv',skiprows=2)
# å¯¼å…¥ä¹¡æ‘æ•°æ®
df4 = pd.read_csv('/home/kesci/input/GENDER8810/1-7c  å„åœ°åŒºåˆ†å¹´é¾„ã€æ€§åˆ«çš„äººå£(ä¹¡æ‘).csv',skiprows=2)
```

### å¤„ç†æ•°æ®[Â¶](#å¤„ç†æ•°æ®)

In [4]:

```
# å®šä¹‰å‡½æ•°ç”¨äºæ˜¾ç¤ºæ•°æ®çš„å¤´éƒ¨å’Œå°¾éƒ¨ä¿¡æ¯
def display_head_tail(data):
    display(data.head(3).append(data.tail(2)))
```

In [5]:

```
print('pcounté‡å¤æ•°æ®ï¼š',df1.duplicated().sum())
print('df1é‡å¤æ•°æ®ï¼š',df1.duplicated().sum())
print('df2é‡å¤æ•°æ®ï¼š',df2.duplicated().sum())
print('df3é‡å¤æ•°æ®ï¼š',df3.duplicated().sum())
print('df4é‡å¤æ•°æ®ï¼š',df4.duplicated().sum())
pcounté‡å¤æ•°æ®ï¼š 0
df1é‡å¤æ•°æ®ï¼š 0
df2é‡å¤æ•°æ®ï¼š 0
df3é‡å¤æ•°æ®ï¼š 0
df4é‡å¤æ•°æ®ï¼š 0
```

In [6]:

```
print('å„åœ°åŒºï¼š',display_head_tail(pcount))
print('æˆ·ç±ï¼š',display_head_tail(df1))
print('åŸå¸‚ï¼š',display_head_tail(df2))
print('é•‡ï¼š',display_head_tail(df3))
print('ä¹¡æ‘ï¼š',display_head_tail(df4))
```

|      | Unnamed: 0 | å•ä½ï¼šäºº   | Unnamed: 2 | Unnamed: 3 | Unnamed: 4 | Unnamed: 5 | Unnamed: 6 | Unnamed: 7 | Unnamed: 8 | Unnamed: 9 | ...  | Unnamed: 246 | Unnamed: 247 | Unnamed: 248 | Unnamed: 249 | Unnamed: 250 | Unnamed: 251 | Unnamed: 252 | Unnamed: 253 | Unnamed: 254 | Unnamed: 255 |
| ---- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 0    | åœ°    åŒº   | åˆ    è®¡   | NaN        | NaN        | 0å²        | NaN        | NaN        | 1-4å²      | NaN        | NaN        | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 1    | NaN        | åˆè®¡       | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 2    | å…¨    å›½   | 1332810869 | 682329104  | 650481765  | 13786434   | 7461199    | 6325235    | 61746176   | 33601367   | 28144809   | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 32   | å®    å¤   | 6301350    | 3227404    | 3073946    | 75277      | 40062      | 35215      | 341751     | 181134     | 160617     | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 33   | æ–°    ç–†   | 21815815   | 11270147   | 10545668   | 320400     | 164879     | 155521     | 1243815    | 638472     | 605343     | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |

5 rows Ã— 256 columns

```
å„åœ°åŒºï¼š None
```

|      | Unnamed: 0 | å•ä½ï¼šäººã€% | Unnamed: 2 | Unnamed: 3 | Unnamed: 4       | Unnamed: 5 | Unnamed: 6 | Unnamed: 7                   | Unnamed: 8 | Unnamed: 9 | ...  | Unnamed: 246 | Unnamed: 247 | Unnamed: 248 | Unnamed: 249 | Unnamed: 250 | Unnamed: 251 | Unnamed: 252 | Unnamed: 253 | Unnamed: 254 | Unnamed: 255 |
| ---- | ---------- | ----------- | ---------- | ---------- | ---------------- | ---------- | ---------- | ---------------------------- | ---------- | ---------- | ---- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 0    | åœ°    åŒº   | æˆ·ç±äººå£    | NaN        | NaN        | å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£ | NaN        | NaN        | å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ | NaN        | NaN        | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 1    | NaN        | åˆè®¡        | ç”·         | å¥³         | åˆè®¡             | ç”·         | å¥³         | åˆè®¡                         | ç”·         | å¥³         | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 2    | å…¨    å›½   | 1337376754  | 687562046  | 649814708  | 258214359        | 138455877  | 119758482  | 19.31                        | 20.14      | 18.43      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 32   | å®    å¤   | 6323117     | 3222965    | 3100152    | 1499761          | 782775     | 716986     | 23.72                        | 24.29      | 23.13      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 33   | æ–°    ç–†   | 20255650    | 10302100   | 9953550    | 2727267          | 1292425    | 1434842    | 13.46                        | 12.55      | 14.42      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |

5 rows Ã— 256 columns

```
æˆ·ç±ï¼š None
```

|      | Unnamed: 0 | å•ä½ï¼šäºº  | Unnamed: 2 | Unnamed: 3 | Unnamed: 4 | Unnamed: 5 | Unnamed: 6 | Unnamed: 7 | Unnamed: 8 | Unnamed: 9 | ...  | Unnamed: 246 | Unnamed: 247 | Unnamed: 248 | Unnamed: 249 | Unnamed: 250 | Unnamed: 251 | Unnamed: 252 | Unnamed: 253 | Unnamed: 254 | Unnamed: 255 |
| ---- | ---------- | --------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 0    | åœ°    åŒº   | åˆ    è®¡  | NaN        | NaN        | 0å²        | NaN        | NaN        | 1-4å²      | NaN        | NaN        | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 1    | NaN        | åˆè®¡      | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 2    | å…¨    å›½   | 403760040 | 206470117  | 197289923  | 2825962    | 1505781    | 1320181    | 13534485   | 7267961    | 6266524    | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 32   | å®    å¤   | 2059295   | 1046614    | 1012681    | 16934      | 8849       | 8085       | 83420      | 44082      | 39338      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 33   | æ–°    ç–†   | 6071803   | 3100238    | 2971565    | 50064      | 26016      | 24048      | 238648     | 123498     | 115150     | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |

5 rows Ã— 256 columns

```
åŸå¸‚ï¼š None
```

|      | Unnamed: 0 | å•ä½ï¼šäºº  | Unnamed: 2 | Unnamed: 3 | Unnamed: 4 | Unnamed: 5 | Unnamed: 6 | Unnamed: 7 | Unnamed: 8 | Unnamed: 9 | ...  | Unnamed: 246 | Unnamed: 247 | Unnamed: 248 | Unnamed: 249 | Unnamed: 250 | Unnamed: 251 | Unnamed: 252 | Unnamed: 253 | Unnamed: 254 | Unnamed: 255 |
| ---- | ---------- | --------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 0    | åœ°    åŒº   | åˆ    è®¡  | NaN        | NaN        | 0å²        | NaN        | NaN        | 1-4å²      | NaN        | NaN        | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 1    | NaN        | åˆè®¡      | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 2    | å…¨    å›½   | 266245506 | 136570666  | 129674840  | 2549317    | 1383316    | 1166001    | 12026706   | 6592671    | 5434035    | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 32   | å®    å¤   | 962727    | 501105     | 461622     | 10208      | 5467       | 4741       | 52225      | 27846      | 24379      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 33   | æ–°    ç–†   | 3263949   | 1686053    | 1577896    | 32201      | 16579      | 15622      | 150064     | 76849      | 73215      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |

5 rows Ã— 256 columns

```
é•‡ï¼š None
```

|      | Unnamed: 0 | å•ä½ï¼šäºº  | Unnamed: 2 | Unnamed: 3 | Unnamed: 4 | Unnamed: 5 | Unnamed: 6 | Unnamed: 7 | Unnamed: 8 | Unnamed: 9 | ...  | Unnamed: 246 | Unnamed: 247 | Unnamed: 248 | Unnamed: 249 | Unnamed: 250 | Unnamed: 251 | Unnamed: 252 | Unnamed: 253 | Unnamed: 254 | Unnamed: 255 |
| ---- | ---------- | --------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 0    | åœ°    åŒº   | åˆ    è®¡  | NaN        | NaN        | 0å²        | NaN        | NaN        | 1-4å²      | NaN        | NaN        | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 1    | NaN        | åˆè®¡      | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | å°è®¡       | ç”·         | å¥³         | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 2    | å…¨    å›½   | 662805323 | 339288321  | 323517002  | 8411155    | 4572102    | 3839053    | 36184985   | 19740735   | 16444250   | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 32   | å®    å¤   | 3279328   | 1679685    | 1599643    | 48135      | 25746      | 22389      | 206106     | 109206     | 96900      | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |
| 33   | æ–°    ç–†   | 12480063  | 6483856    | 5996207    | 238135     | 122284     | 115851     | 855103     | 438125     | 416978     | ...  | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          | NaN          |

5 rows Ã— 256 columns

```
ä¹¡æ‘ï¼š None
```

In [7]:

```
#åˆ é™¤å¤šä½™çš„åˆ—å’Œå¤„ç†è¡¨å¤´
def drop_na(data):
    data=data.dropna(axis=1,how='all',inplace=True)

def rename(frame):
    for i in range(frame.shape[1]):
        frame.iloc[1,0]='åœ°åŒº'
        if frame.iloc[1,i]=='å°è®¡'or frame.iloc[1,i]=='åˆè®¡':
            frame.iloc[1,i]=str(frame.iloc[1,i])+ '_'+str(frame.iloc[0,i])
        elif frame.iloc[1,i]=='ç”·':
            frame.iloc[1,i]='ç”·' + '_' + str(frame.iloc[0,i-1])
        elif frame.iloc[1,i]=='å¥³':
            frame.iloc[1,i]='å¥³' + '_' + str(frame.iloc[0,i-2])
```

In [8]:

```
for x in [pcount,df1,df2,df3,df4]:
    drop_na(x)
    rename(x)
```

In [9]:

```
def re_columns(data):
    data.columns = data.iloc[1,]
    
for x in [pcount,df1,df2,df3,df4]:
    re_columns(x)
```

In [10]:

```
pcount = pcount.iloc[2:,:]
df1 = df1.iloc[2:,:]
df2 = df2.iloc[2:,:]
df3 = df3.iloc[2:,:]
df4 = df4.iloc[2:,:]
```

In [11]:

```
pcount = pcount.set_index("åœ°åŒº").stack().reset_index()
pcount.columns = ['åœ°åŒº','ç±»åˆ«','ç»Ÿè®¡äººæ•°']

df1 = df1.set_index("åœ°åŒº").stack().reset_index()
df1.columns = ['åœ°åŒº','ç±»åˆ«','ç»Ÿè®¡äººæ•°']

df2 = df2.set_index("åœ°åŒº").stack().reset_index()
df2.columns = ['åœ°åŒº','ç±»åˆ«','ç»Ÿè®¡äººæ•°']

df3 = df3.set_index("åœ°åŒº").stack().reset_index()
df3.columns = ['åœ°åŒº','ç±»åˆ«','ç»Ÿè®¡äººæ•°']

df4 = df4.set_index("åœ°åŒº").stack().reset_index()
df4.columns = ['åœ°åŒº','ç±»åˆ«','ç»Ÿè®¡äººæ•°']
```

In [12]:

```
print('å„åœ°åŒºï¼š',display_head_tail(pcount))
print('æˆ·ç±ï¼š',display_head_tail(df1))
print('åŸå¸‚ï¼š',display_head_tail(df2))
print('é•‡ï¼š',display_head_tail(df3))
print('ä¹¡æ‘ï¼š',display_head_tail(df4))
```

|      | åœ°åŒº     | ç±»åˆ«           | ç»Ÿè®¡äººæ•°   |
| ---- | -------- | -------------- | ---------- |
| 0    | å…¨    å›½ | åˆè®¡_åˆ    è®¡  | 1332810869 |
| 1    | å…¨    å›½ | ç”·_åˆ    è®¡    | 682329104  |
| 2    | å…¨    å›½ | å¥³_åˆ    è®¡    | 650481765  |
| 2206 | æ–°    ç–† | ç”·_100å²åŠä»¥ä¸Š | 359        |
| 2207 | æ–°    ç–† | å¥³_100å²åŠä»¥ä¸Š | 384        |

```
å„åœ°åŒºï¼š None
```

|      | åœ°åŒº     | ç±»åˆ«                            | ç»Ÿè®¡äººæ•°   |
| ---- | -------- | ------------------------------- | ---------- |
| 0    | å…¨    å›½ | åˆè®¡_æˆ·ç±äººå£                   | 1337376754 |
| 1    | å…¨    å›½ | ç”·_æˆ·ç±äººå£                     | 687562046  |
| 2    | å…¨    å›½ | å¥³_æˆ·ç±äººå£                     | 649814708  |
| 286  | æ–°    ç–† | ç”·_å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ | 12.55      |
| 287  | æ–°    ç–† | å¥³_å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ | 14.42      |

```
æˆ·ç±ï¼š None
```

|      | åœ°åŒº     | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  |
| ---- | -------- | -------------- | --------- |
| 0    | å…¨    å›½ | åˆè®¡_åˆ    è®¡  | 403760040 |
| 1    | å…¨    å›½ | ç”·_åˆ    è®¡    | 206470117 |
| 2    | å…¨    å›½ | å¥³_åˆ    è®¡    | 197289923 |
| 2205 | æ–°    ç–† | ç”·_100å²åŠä»¥ä¸Š | 62        |
| 2206 | æ–°    ç–† | å¥³_100å²åŠä»¥ä¸Š | 71        |

```
åŸå¸‚ï¼š None
```

|      | åœ°åŒº     | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  |
| ---- | -------- | -------------- | --------- |
| 0    | å…¨    å›½ | åˆè®¡_åˆ    è®¡  | 266245506 |
| 1    | å…¨    å›½ | ç”·_åˆ    è®¡    | 136570666 |
| 2    | å…¨    å›½ | å¥³_åˆ    è®¡    | 129674840 |
| 2205 | æ–°    ç–† | ç”·_100å²åŠä»¥ä¸Š | 44        |
| 2206 | æ–°    ç–† | å¥³_100å²åŠä»¥ä¸Š | 51        |

```
é•‡ï¼š None
```

|      | åœ°åŒº     | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  |
| ---- | -------- | -------------- | --------- |
| 0    | å…¨    å›½ | åˆè®¡_åˆ    è®¡  | 662805323 |
| 1    | å…¨    å›½ | ç”·_åˆ    è®¡    | 339288321 |
| 2    | å…¨    å›½ | å¥³_åˆ    è®¡    | 323517002 |
| 2206 | æ–°    ç–† | ç”·_100å²åŠä»¥ä¸Š | 253       |
| 2207 | æ–°    ç–† | å¥³_100å²åŠä»¥ä¸Š | 262       |

```
ä¹¡æ‘ï¼š None
```

In [13]:

```
#å¤„ç†ç©ºæ ¼
def replace_r(frame):
    for i in range(frame.shape[0]):
        frame.iloc[i,0] = frame.iloc[i,0].replace(" ",'')
        frame.iloc[i,1] = frame.iloc[i,1].replace(" ",'')
        
replace_r(pcount)
replace_r(df1)
replace_r(df2)
replace_r(df3)
replace_r(df4)
```

In [14]:

```
#æ·»åŠ åˆ—ï¼Œä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€å‘½åäº†
def new_cl(data):
    data['æ€§åˆ«'] = data['ç±»åˆ«'].str.split('_').str[0]
    data['å¹´é¾„'] = data['ç±»åˆ«'].str.split('_').str[-1]

new_cl(pcount)
new_cl(df1)
new_cl(df2)
new_cl(df3)
new_cl(df4)
```

In [15]:

```
print('å„åœ°åŒºï¼š',display_head_tail(pcount))
print('æˆ·ç±ï¼š',display_head_tail(df1))
print('åŸå¸‚ï¼š',display_head_tail(df2))
print('é•‡ï¼š',display_head_tail(df3))
print('ä¹¡æ‘ï¼š',display_head_tail(df4))
```

|      | åœ°åŒº | ç±»åˆ«           | ç»Ÿè®¡äººæ•°   | æ€§åˆ« | å¹´é¾„        |
| ---- | ---- | -------------- | ---------- | ---- | ----------- |
| 0    | å…¨å›½ | åˆè®¡_åˆè®¡      | 1332810869 | åˆè®¡ | åˆè®¡        |
| 1    | å…¨å›½ | ç”·_åˆè®¡        | 682329104  | ç”·   | åˆè®¡        |
| 2    | å…¨å›½ | å¥³_åˆè®¡        | 650481765  | å¥³   | åˆè®¡        |
| 2206 | æ–°ç–† | ç”·_100å²åŠä»¥ä¸Š | 359        | ç”·   | 100å²åŠä»¥ä¸Š |
| 2207 | æ–°ç–† | å¥³_100å²åŠä»¥ä¸Š | 384        | å¥³   | 100å²åŠä»¥ä¸Š |

```
å„åœ°åŒºï¼š None
```

|      | åœ°åŒº | ç±»åˆ«                            | ç»Ÿè®¡äººæ•°   | æ€§åˆ« | å¹´é¾„                         |
| ---- | ---- | ------------------------------- | ---------- | ---- | ---------------------------- |
| 0    | å…¨å›½ | åˆè®¡_æˆ·ç±äººå£                   | 1337376754 | åˆè®¡ | æˆ·ç±äººå£                     |
| 1    | å…¨å›½ | ç”·_æˆ·ç±äººå£                     | 687562046  | ç”·   | æˆ·ç±äººå£                     |
| 2    | å…¨å›½ | å¥³_æˆ·ç±äººå£                     | 649814708  | å¥³   | æˆ·ç±äººå£                     |
| 286  | æ–°ç–† | ç”·_å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ | 12.55      | ç”·   | å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ |
| 287  | æ–°ç–† | å¥³_å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ | 14.42      | å¥³   | å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡ |

```
æˆ·ç±ï¼š None
```

|      | åœ°åŒº | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  | æ€§åˆ« | å¹´é¾„        |
| ---- | ---- | -------------- | --------- | ---- | ----------- |
| 0    | å…¨å›½ | åˆè®¡_åˆè®¡      | 403760040 | åˆè®¡ | åˆè®¡        |
| 1    | å…¨å›½ | ç”·_åˆè®¡        | 206470117 | ç”·   | åˆè®¡        |
| 2    | å…¨å›½ | å¥³_åˆè®¡        | 197289923 | å¥³   | åˆè®¡        |
| 2205 | æ–°ç–† | ç”·_100å²åŠä»¥ä¸Š | 62        | ç”·   | 100å²åŠä»¥ä¸Š |
| 2206 | æ–°ç–† | å¥³_100å²åŠä»¥ä¸Š | 71        | å¥³   | 100å²åŠä»¥ä¸Š |

```
åŸå¸‚ï¼š None
```

|      | åœ°åŒº | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  | æ€§åˆ« | å¹´é¾„        |
| ---- | ---- | -------------- | --------- | ---- | ----------- |
| 0    | å…¨å›½ | åˆè®¡_åˆè®¡      | 266245506 | åˆè®¡ | åˆè®¡        |
| 1    | å…¨å›½ | ç”·_åˆè®¡        | 136570666 | ç”·   | åˆè®¡        |
| 2    | å…¨å›½ | å¥³_åˆè®¡        | 129674840 | å¥³   | åˆè®¡        |
| 2205 | æ–°ç–† | ç”·_100å²åŠä»¥ä¸Š | 44        | ç”·   | 100å²åŠä»¥ä¸Š |
| 2206 | æ–°ç–† | å¥³_100å²åŠä»¥ä¸Š | 51        | å¥³   | 100å²åŠä»¥ä¸Š |

```
é•‡ï¼š None
```

|      | åœ°åŒº | ç±»åˆ«           | ç»Ÿè®¡äººæ•°  | æ€§åˆ« | å¹´é¾„        |
| ---- | ---- | -------------- | --------- | ---- | ----------- |
| 0    | å…¨å›½ | åˆè®¡_åˆè®¡      | 662805323 | åˆè®¡ | åˆè®¡        |
| 1    | å…¨å›½ | ç”·_åˆè®¡        | 339288321 | ç”·   | åˆè®¡        |
| 2    | å…¨å›½ | å¥³_åˆè®¡        | 323517002 | å¥³   | åˆè®¡        |
| 2206 | æ–°ç–† | ç”·_100å²åŠä»¥ä¸Š | 253       | ç”·   | 100å²åŠä»¥ä¸Š |
| 2207 | æ–°ç–† | å¥³_100å²åŠä»¥ä¸Š | 262       | å¥³   | 100å²åŠä»¥ä¸Š |

```
ä¹¡æ‘ï¼š None
```

In [16]:

```
print('pcount:\n',pcount.isnull().sum(),"\n")
print('df1ç©ºå€¼:\n',df1.isnull().sum(),"\n")
print('df2ç©ºå€¼:\n',df1.isnull().sum(),"\n")
print('df3ç©ºå€¼:\n',df1.isnull().sum(),"\n")
print('df4ç©ºå€¼:\n',df1.isnull().sum(),"\n")
pcount:
 åœ°åŒº      0
ç±»åˆ«      0
ç»Ÿè®¡äººæ•°    0
æ€§åˆ«      0
å¹´é¾„      0
dtype: int64 

df1ç©ºå€¼:
 åœ°åŒº      0
ç±»åˆ«      0
ç»Ÿè®¡äººæ•°    0
æ€§åˆ«      0
å¹´é¾„      0
dtype: int64 

df2ç©ºå€¼:
 åœ°åŒº      0
ç±»åˆ«      0
ç»Ÿè®¡äººæ•°    0
æ€§åˆ«      0
å¹´é¾„      0
dtype: int64 

df3ç©ºå€¼:
 åœ°åŒº      0
ç±»åˆ«      0
ç»Ÿè®¡äººæ•°    0
æ€§åˆ«      0
å¹´é¾„      0
dtype: int64 

df4ç©ºå€¼:
 åœ°åŒº      0
ç±»åˆ«      0
ç»Ÿè®¡äººæ•°    0
æ€§åˆ«      0
å¹´é¾„      0
dtype: int64 
```

In [17]:

```
pcount['ç»Ÿè®¡äººæ•°'] = pcount['ç»Ÿè®¡äººæ•°'].astype('int')
df1['ç»Ÿè®¡äººæ•°'] = df1['ç»Ÿè®¡äººæ•°'].astype('float')
df2['ç»Ÿè®¡äººæ•°'] = df2['ç»Ÿè®¡äººæ•°'].astype('int')
df3['ç»Ÿè®¡äººæ•°'] = df3['ç»Ÿè®¡äººæ•°'].astype('int')
df4['ç»Ÿè®¡äººæ•°'] = df4['ç»Ÿè®¡äººæ•°'].astype('int')
```

## 2ã€å¯è§†åŒ–éƒ¨åˆ†[Â¶](#2ã€å¯è§†åŒ–éƒ¨åˆ†)

### 2.1 å…¨å›½äººå£æ•°[Â¶](#2.1-å…¨å›½äººå£æ•°)

In [18]:

```
fig = px.bar(y=[1337376754,687562046,649814708],x=['å…¨å›½äººå£æ€»æ•°','ç”·æ€§äººå£æ€»æ•°','å¥³æ€§äººå£æ€»æ•°'],title='å…¨å›½äººå£æ€»æ•°',
             color_discrete_sequence=px.colors.qualitative.Pastel2,labels={"x":" ","y":"äººå£æ€»æ•°"})
fig.show()
```



å…¨å›½äººå£æ€»æ•°ç”·æ€§äººå£æ€»æ•°å¥³æ€§äººå£æ€»æ•°00.2B0.4B0.6B0.8B1B1.2B1.4B

å…¨å›½äººå£æ€»æ•°äººå£æ€»æ•°













### 2.2 æ€§åˆ«[Â¶](#2.2-æ€§åˆ«)

In [19]:

```
fig = px.pie(values = [687562046,649814708],names=['ç”·æ€§','å¥³æ€§'],title='ä¸åŒæ€§åˆ«å å…¨å›½äººå£æ€»æ•°çš„ç™¾åˆ†æ¯”',
            color_discrete_sequence=px.colors.qualitative.Pastel2)
fig.update_traces(textposition='inside', textinfo='percent+label')
fig.show()
```

ç”·æ€§51.4%å¥³æ€§48.6%

ç”·æ€§å¥³æ€§ä¸åŒæ€§åˆ«å å…¨å›½äººå£æ€»æ•°çš„ç™¾åˆ†æ¯”









### 2.3 å¹´é¾„ç»„[Â¶](#2.3-å¹´é¾„ç»„)

In [20]:

```
group_y = pcount[(pcount['åœ°åŒº']=='å…¨å›½')&(pcount['æ€§åˆ«']=='å°è®¡')&(pcount['å¹´é¾„']!='åˆè®¡')]
```

In [21]:

```
def age_group(frame):
    age_group=[]
    for i in range(len(frame)):
        if frame.iloc[i,4] in['65-69å²', '70-74å²', '75-79å²', '80-84å²', '85-89å²','90-94å²', '95-99å²', '100å²åŠä»¥ä¸Š']:
            age_group.append('65å²ä»¥ä¸Š')
        elif frame.iloc[i,4] in['55-59å²','60-64å²']:
            age_group.append('55-64å²')
        else:
            age_group.append('55å²ä»¥ä¸‹')
    frame['å¹´é¾„ç»„']=age_group       

age_group(group_y)
```

In [22]:

```
group_y.groupby('å¹´é¾„ç»„')['ç»Ÿè®¡äººæ•°'].sum()
```

Out[22]:

```
å¹´é¾„ç»„
55-64å²     139979756
55å²ä»¥ä¸‹     1073903955
65å²ä»¥ä¸Š      118927158
Name: ç»Ÿè®¡äººæ•°, dtype: int64
```

In [23]:

```
1337376754-group_y['ç»Ÿè®¡äººæ•°'].sum()
```

Out[23]:

```
4565885
```

In [24]:

```
fig = px.pie(values = [139979756,118927158,1073903955,4565885],names=['55-64å²','65å²ä»¥ä¸Š','55å²ä»¥ä¸‹','å…¶ä»–'],
             title='ä¸åŒå¹´é¾„ç»„çš„äººå£ç™¾åˆ†æ¯”',color_discrete_sequence=px.colors.qualitative.Pastel2)
fig.update_traces(textposition='inside', textinfo='percent+label')
fig.show()
```

55å²ä»¥ä¸‹80.3%55-64å²10.5%65å²ä»¥ä¸Š8.89%å…¶ä»–0.341%

55å²ä»¥ä¸‹55-64å²65å²ä»¥ä¸Šå…¶ä»–ä¸åŒå¹´é¾„ç»„çš„äººå£ç™¾åˆ†æ¯”









æŒ‰ç…§è”åˆå›½çš„ä¼ ç»Ÿæ ‡å‡†æ˜¯ä¸€ä¸ªåœ°åŒº60å²ä»¥ä¸Šè€äººè¾¾åˆ°æ€»äººå£çš„10%ï¼Œæ–°æ ‡å‡†æ˜¯65å²ä»¥ä¸Šè€äººå æ€»äººå£çš„7%ï¼Œå³è¯¥åœ°åŒºè§†ä¸ºè¿›å…¥è€é¾„åŒ–ç¤¾ä¼šï¼šæ ¹æ®æ–°çš„æ ‡å‡†,æˆ‘å›½æ—©åœ¨2010å¹´å°±å·²ç»è¿›å…¥è€é¾„åŒ–ç¤¾ä¼šï¼Œé¢„è®¡åˆ°ä»Šå¹´65å²ä»¥ä¸Šçš„äººå£ç™¾åˆ†æ¯”ä¼šåœ¨ 20% å·¦å³

In [25]:

```
fig = px.pie(values =group_y['ç»Ÿè®¡äººæ•°'],names=group_y['å¹´é¾„'],height=600,
             title='ä¸åŒå¹´é¾„å±‚çš„äººå£ç™¾åˆ†æ¯”',color_discrete_sequence=px.colors.qualitative.Pastel2)
fig.update_traces(textposition='outside', textinfo='percent+label')
fig.show()
```

20-24å²9.56%40-44å²9.36%35-39å²8.86%45-49å²7.92%25-29å²7.58%15-19å²7.49%30-34å²7.29%55-59å²6.1%50-54å²5.91%10-14å²5.62%5-9å²5.32%1-4å²4.63%60-64å²4.4%65-69å²3.08%70-74å²2.47%75-79å²1.79%0å²1.03%80-84å²1%85-89å²0.423%90-94å²0.118%95-99å²0.0278%100å²åŠä»¥ä¸Š0.0027%

20-24å²40-44å²35-39å²45-49å²25-29å²15-19å²30-34å²55-59å²50-54å²10-14å²5-9å²1-4å²60-64å²65-69å²70-74å²75-79å²0å²80-84å²85-89å²90-94å²95-99å²100å²åŠä»¥ä¸Šä¸åŒå¹´é¾„å±‚çš„äººå£ç™¾åˆ†æ¯”









### 2.4 æˆ·ç±ç™¾åˆ†æ¯”[Â¶](#2.4-æˆ·ç±ç™¾åˆ†æ¯”)

In [26]:

```
fig = px.pie(values = [403760040,266245506,662805323,4565885],names=['åŸå¸‚','é•‡','ä¹¡æ‘','å…¶ä»–'],
             title='ä¸åŒæˆ·ç±çš„äººå£ç™¾åˆ†æ¯”',color_discrete_sequence=px.colors.qualitative.Pastel2)
fig.update_traces(textposition='inside', textinfo='percent+label')
fig.show()
```

ä¹¡æ‘49.6%åŸå¸‚30.2%é•‡19.9%å…¶ä»–0.341%

ä¹¡æ‘åŸå¸‚é•‡å…¶ä»–ä¸åŒæˆ·ç±çš„äººå£ç™¾åˆ†æ¯”









### 2.5 å…¨å›½äººå£ç»“æ„é‡‘å­—å¡”[Â¶](#2.5-å…¨å›½äººå£ç»“æ„é‡‘å­—å¡”)

In [27]:

```
pcount['ç»Ÿè®¡äººæ•°']=pcount['ç»Ÿè®¡äººæ•°'].astype('int')
result = pcount[(pcount['æ€§åˆ«'].isin(['ç”·','å¥³']))&(pcount['åœ°åŒº']=='å…¨å›½')&(pcount['å¹´é¾„']!='åˆè®¡')]
result['äººå£å æ¯”'] =( result['ç»Ÿè®¡äººæ•°']/result['ç»Ÿè®¡äººæ•°'].sum()*100).round(2)
```

In [28]:

```
y = result['å¹´é¾„'].unique()
x_w = -result[result['æ€§åˆ«']=='å¥³']['äººå£å æ¯”'].values
x_m = result[result['æ€§åˆ«']=='ç”·']['äººå£å æ¯”'].values

layout = go.Layout(title='2010ä¸­å›½äººå£æ™®æŸ¥å¹´é¾„ç»“æ„é‡‘å­—å¡”',yaxis=go.layout.YAxis(title='å¹´é¾„å±‚'),
                   xaxis=go.layout.XAxis(range=[-5,5],
                                        tickvals=[-5,-3,-1,0,1,3,5],
                                        ticktext=[5,3,1,0,1,3,5],
                                        title='äººå£å æ¯”(%)'),
                  barmode='overlay',bargap=0.1,height=600)
data = [go.Bar(y=y,x=x_m,orientation='h',name='ç”·',hoverinfo='x',marker=dict(color='rgb(179,226,205)')),
       go.Bar(y=y,x=x_w,orientation='h',name='å¥³',text=-1*x_w.astype('float'),hoverinfo='text',
             marker=dict(color='rgb(253,205,172)'))]
figure = go.Figure(data=data,layout=layout)
figure
```

53101350å²1-4å²5-9å²10-14å²15-19å²20-24å²25-29å²30-34å²35-39å²40-44å²45-49å²50-54å²55-59å²60-64å²65-69å²70-74å²75-79å²80-84å²85-89å²90-94å²95-99å²100å²åŠä»¥ä¸Š

ç”·å¥³2010ä¸­å›½äººå£æ™®æŸ¥å¹´é¾„ç»“æ„é‡‘å­—å¡”äººå£å æ¯”(%)å¹´é¾„å±‚













### 2.6 åŸå¸‚äººå£ç»“æ„é‡‘å­—å¡”[Â¶](#2.6-åŸå¸‚äººå£ç»“æ„é‡‘å­—å¡”)

In [29]:

```
df2['ç»Ÿè®¡äººæ•°'] = df2['ç»Ÿè®¡äººæ•°'].astype('int')
city = df2[(df2['æ€§åˆ«'].isin(['ç”·','å¥³']))&(df2['åœ°åŒº']=='å…¨å›½')&(df2['å¹´é¾„']!='åˆè®¡')]
city['äººå£å æ¯”'] =( city['ç»Ÿè®¡äººæ•°']/city['ç»Ÿè®¡äººæ•°'].sum()*100).round(2)
```

In [30]:

```
y = city['å¹´é¾„'].unique()
x_w = -city[city['æ€§åˆ«']=='å¥³']['äººå£å æ¯”'].values
x_m = city[city['æ€§åˆ«']=='ç”·']['äººå£å æ¯”'].values

layout = go.Layout(title='åŸå¸‚  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)',yaxis=go.layout.YAxis(title='å¹´é¾„å±‚'),
                   xaxis=go.layout.XAxis(range=[-6,6],
                                        tickvals=[-6,-4,-2,0,2,4,6],
                                        ticktext=[6,4,2,0,2,4,6],
                                        title='äººå£å æ¯”(%)'),
                  barmode='overlay',bargap=0.1,height=600)
data = [go.Bar(y=y,x=x_m,orientation='h',name='ç”·',hoverinfo='x',marker=dict(color='rgb(179,226,205)')),
       go.Bar(y=y,x=x_w,orientation='h',name='å¥³',text=-1*x_w.astype('float'),hoverinfo='text',
             marker=dict(color='rgb(253,205,172)'))]
figure = go.Figure(data=data,layout=layout)
figure
```

64202460å²1-4å²5-9å²10-14å²15-19å²20-24å²25-29å²30-34å²35-39å²40-44å²45-49å²50-54å²55-59å²60-64å²65-69å²70-74å²75-79å²80-84å²85-89å²90-94å²95-99å²100å²åŠä»¥ä¸Š

ç”·å¥³åŸå¸‚  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)äººå£å æ¯”(%)å¹´é¾„å±‚













### 2.7 é•‡äººå£ç»“æ„é‡‘å­—å¡”[Â¶](#2.7-é•‡äººå£ç»“æ„é‡‘å­—å¡”)

In [31]:

```
df3['ç»Ÿè®¡äººæ•°'] = df3['ç»Ÿè®¡äººæ•°'].astype('int')
town = df3[(df3['æ€§åˆ«'].isin(['ç”·','å¥³']))&(df3['åœ°åŒº']=='å…¨å›½')&(df3['å¹´é¾„']!='åˆè®¡')]
town['äººå£å æ¯”'] =( town['ç»Ÿè®¡äººæ•°']/town['ç»Ÿè®¡äººæ•°'].sum()*100).round(2)
```

In [32]:

```
y = town['å¹´é¾„'].unique()
x_w = -town[town['æ€§åˆ«']=='å¥³']['äººå£å æ¯”'].values
x_m = town[town['æ€§åˆ«']=='ç”·']['äººå£å æ¯”'].values

layout = go.Layout(title='é•‡  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)',yaxis=go.layout.YAxis(title='å¹´é¾„å±‚'),
                   xaxis=go.layout.XAxis(range=[-6,6],
                                        tickvals=[-6,-4,-2,0,2,4,6],
                                        ticktext=[6,4,2,0,2,4,6],
                                        title='äººå£å æ¯”(%)'),
                  barmode='overlay',bargap=0.1,height=600)
data = [go.Bar(y=y,x=x_m,orientation='h',name='ç”·',hoverinfo='x',marker=dict(color='rgb(179,226,205)')),
       go.Bar(y=y,x=x_w,orientation='h',name='å¥³',text=-1*x_w.astype('float'),hoverinfo='text',
             marker=dict(color='rgb(253,205,172)'))]
figure = go.Figure(data=data,layout=layout)
figure
```

64202460å²1-4å²5-9å²10-14å²15-19å²20-24å²25-29å²30-34å²35-39å²40-44å²45-49å²50-54å²55-59å²60-64å²65-69å²70-74å²75-79å²80-84å²85-89å²90-94å²95-99å²100å²åŠä»¥ä¸Š

ç”·å¥³é•‡  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)äººå£å æ¯”(%)å¹´é¾„å±‚













### 2.8 ä¹¡æ‘äººå£ç»“æ„é‡‘å­—å¡”[Â¶](#2.8-ä¹¡æ‘äººå£ç»“æ„é‡‘å­—å¡”)

In [33]:

```
df4['ç»Ÿè®¡äººæ•°'] = df4['ç»Ÿè®¡äººæ•°'].astype('int')
countryside = df4[(df4['æ€§åˆ«'].isin(['ç”·','å¥³']))&(df4['åœ°åŒº']=='å…¨å›½')&(df4['å¹´é¾„']!='åˆè®¡')]
countryside['äººå£å æ¯”'] =( countryside['ç»Ÿè®¡äººæ•°']/countryside['ç»Ÿè®¡äººæ•°'].sum()*100).round(2)
```

In [34]:

```
y = countryside['å¹´é¾„'].unique()
x_w = -countryside[countryside['æ€§åˆ«']=='å¥³']['äººå£å æ¯”'].values
x_m = countryside[countryside['æ€§åˆ«']=='ç”·']['äººå£å æ¯”'].values

layout = go.Layout(title='ä¹¡æ‘  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)',yaxis=go.layout.YAxis(title='å¹´é¾„å±‚'),
                   xaxis=go.layout.XAxis(range=[-6,6],
                                        tickvals=[-6,-4,-2,0,2,4,6],
                                        ticktext=[6,4,2,0,2,4,6],
                                        title='äººå£å æ¯”(%)'),
                  barmode='overlay',bargap=0.1,height=600)
data = [go.Bar(y=y,x=x_m,orientation='h',name='ç”·',hoverinfo='x',marker=dict(color='rgb(179,226,205)')),
       go.Bar(y=y,x=x_w,orientation='h',name='å¥³',text=-1*x_w.astype('float'),hoverinfo='text',
             marker=dict(color='rgb(253,205,172)'))]
figure = go.Figure(data=data,layout=layout)
figure
```

64202460å²1-4å²5-9å²10-14å²15-19å²20-24å²25-29å²30-34å²35-39å²40-44å²45-49å²50-54å²55-59å²60-64å²65-69å²70-74å²75-79å²80-84å²85-89å²90-94å²95-99å²100å²åŠä»¥ä¸Š

ç”·å¥³ä¹¡æ‘  äººå£å¹´é¾„ç»“æ„(åˆ†åˆ«å åŸå¸‚æ€»äººå£çš„ç™¾åˆ†æ¯”)äººå£å æ¯”(%)å¹´é¾„å±‚













### 2.9 å…¨å›½å„åœ°-å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£æ¯”é‡[Â¶](#2.9-å…¨å›½å„åœ°-å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£æ¯”é‡)

In [35]:

```
data1 = df1[df1['å¹´é¾„']=='å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å æ€»äººå£æ¯”é‡']

fig = px.scatter(y=data1['ç»Ÿè®¡äººæ•°'],x=data1['åœ°åŒº'],title='å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å (è¯¥åœ°åŒº/è¯¥æ€§åˆ«)æ€»äººå£çš„æ¯”é‡',color=data1['æ€§åˆ«'],
            labels={"x":"åœ°åŒº","y":"æ¯”é‡","color":"ç±»åˆ«"},color_discrete_sequence=px.colors.qualitative.Dark2)
fig.show()
```

å…¨å›½åŒ—äº¬å¤©æ´¥æ²³åŒ—å±±è¥¿å†…è’™å¤è¾½å®å‰æ—é»‘é¾™æ±Ÿä¸Šæµ·æ±Ÿè‹æµ™æ±Ÿå®‰å¾½ç¦å»ºæ±Ÿè¥¿å±±ä¸œæ²³å—æ¹–åŒ—æ¹–å—å¹¿ä¸œå¹¿è¥¿æµ·å—é‡åº†å››å·è´µå·äº‘å—è¥¿è—é™•è¥¿ç”˜è‚ƒé’æµ·å®å¤æ–°ç–†51015202530

ç±»åˆ«åˆè®¡ç”·å¥³å¤–å‡ºåŠå¹´ä»¥ä¸Šäººå£å (è¯¥åœ°åŒº/è¯¥æ€§åˆ«)æ€»äººå£çš„æ¯”é‡åœ°åŒºæ¯”é‡













### 2.10 å…¨å›½å„åœ°äººå£åˆ†å¸ƒåœ°å›¾ï¼ˆpyechartsï¼‰[Â¶](#2.10-å…¨å›½å„åœ°äººå£åˆ†å¸ƒåœ°å›¾ï¼ˆpyechartsï¼‰)

In [36]:

```
result1 = pcount[(pcount['æ€§åˆ«']=='å°è®¡')&(pcount['åœ°åŒº']!='å…¨å›½')&(pcount['å¹´é¾„']!='åˆè®¡')]
result2 = result1.groupby('åœ°åŒº')['ç»Ÿè®¡äººæ•°'].sum().reset_index(name='ç»Ÿè®¡äººæ•°')
```

In [37]:

```
pip install pyecharts
```

In [38]:

```
# from pyecharts.globals import CurrentConfig,OnlineHostType
# CurrentConfig.ONLINE_HOST = OnlineHostType.NOTEBOOK_HOST
```

In [39]:

```
from pyecharts.charts import Map
from pyecharts.globals import ThemeType
from pyecharts import options as opts

x_data = result2['åœ°åŒº'].tolist()
y_data = result2['ç»Ÿè®¡äººæ•°'].tolist()

# åœ°å›¾
map1 = Map(init_opts = opts.InitOpts(theme=ThemeType.DARK))
map1.add("", [list(z) for z in zip(x_data, y_data)],"china") 
map1.set_series_opts(label_opts=opts.LabelOpts(is_show=False))
map1.set_global_opts(title_opts=opts.TitleOpts(title='å…¨å›½å„åœ°åŒºäººå£åˆ†å¸ƒ'),
                     visualmap_opts=opts.VisualMapOpts( max_=result2['ç»Ÿè®¡äººæ•°'].max(),
                                                       min_ =result2['ç»Ÿè®¡äººæ•°'].min(),
                                                       is_piecewise=False)
                    )
map1.render_notebook() 
```

Out[39]:

2010å¹´çš„äººå£æ™®æŸ¥æ•°æ®æ˜¾ç¤ºï¼šå¹¿ä¸œçœã€å±±ä¸œçœã€æ²³å—çœã€å››å·çœã€æ±Ÿè‹çœ æ˜¯æ€»äººå£æ•°å‰ 5 çš„åœ°åŒº

ç‚¹ä¸ªèµğŸ‘é¼“åŠ±ä¸€ä¸‹å‘—ğŸ¤